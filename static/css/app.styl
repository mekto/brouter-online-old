@import 'colors'
@import 'variables'
@import 'defaults'
@import 'nib'

*
  box-sizing: border-box;
html
  height: 100%;
body
  height: 100%; margin: 0; padding: 0; color: $font-color; font-family: $font-family;
  -webkit-font-smoothing: antialiased;

#map
  size: 100%;

#toolbox
  width: 270px; margin: 10px; pointer-events: auto;
  header
    display: flex; align-items: center; border-bottom: 1px solid $border-color;
    .logo
      margin: 0; padding: 0 2px; width: 36px; border-right: 1px solid $border-color; color: white;
    strong
      display: inline-block; padding: 0 7px;
  footer
    border-top: 1px solid $border-color; padding: ($line-height / 2) ($gutter / 2); align-items: center;
  section
    background-color: #fff; box-shadow: 1px 1px 1px rgba(black, .2); margin-bottom: ($line-height / 2);
    > .inner
      padding: ($line-height / 2) ($gutter / 2);
  input[type=text]
    width: 100%; padding: 7px 7px; margin: 4px 0; border: $border-color; color: $font-color; box-shadow: inset 1px 1px 1px -1px rgba(black, .1);
    &:focus
      border-color: $accent-color;
  .main footer
    display: flex;

.stretch
  flex: 1;

.loading-line
  stroke-dasharray: 7 3; stroke-dashoffset: 0; animation: dash 2s linear infinite;

.text-right
  text-align: right;

@keyframes dash
  to
    stroke-dashoffset: -70;

.btn
  $color = green
  $border = darken(saturate($color, 9%), 14%)
  $stop-gradient = darken(saturate($color, 9%), 11%)
  $inset-shadow = lighten(desaturate($color, 8%), 15%);
  $text-shadow = darken(saturate($color, 15%), 18%);

  border: 1px solid $border;
  border-radius: 3px;
  box-shadow: inset 0 1px 0 0 $inset-shadow;
  color: white;
  display: inline-block;
  font-size: 10px;
  font-weight: normal;
  background-image: linear-gradient($color, $stop-gradient);
  padding: 7px 18px;
  text-decoration: none;
  text-shadow: 0 1px 0 $text-shadow;
  background-clip: padding-box;

  &:hover:not(:disabled)
    $color-hover = darken(desaturate($color, 4%), 5%);
    $inset-shadow-hover = lighten(desaturate($color, 7%), 5%);
    $stop-gradient-hover = darken(saturate($color, 8%), 14%);

    box-shadow: inset 0 1px 0 0 $inset-shadow-hover;
    background-image: linear-gradient($color-hover, $stop-gradient-hover);
    cursor: pointer;

  &:disabled
    opacity: .5;


fill-and-stroke(color)
  fill: color; stroke: color;
.icon .fill, .icon .text
  stroke: none !important;
.icon .stroke
  fill: none !important;
.icon *
  fill-and-stroke: #fff;


.leaflet-control

  .control-button
    display: block;
    size: 35px;
    line-height: 36px;
    color: white;
    text-align: center;
    text-decoration: none;
    font-weight: bold;
    font-size: 18px;
    background-color: rgba(black, .8);
    cursor: pointer;

    &:hover
      background-color: rgba(black, .95);

    &:first-child
      margin-top: 20px;

    .leaflet-right &:first-child
      border-top-left-radius: 4px;
    .leaflet-right &:last-child
      border-bottom-left-radius: 4px;

  .box
    position: relative;
    header
      background-color: rgba(black, .8);
      border-top-left-radius: 4px;
      border-bottom-left-radius: 4px;
      cursor: pointer;
    .control-button
      background-color: transparent;
    .menu
      background-color: white;
      padding: 15px 0 0 15px;
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      absolute: left 0;
      width: 340px;
    p
      margin: 0 0 5px;
    .layer-preview
      size: 150px 70px;
      background-color: #fff;
      position: relative;
      margin: 0 10px 10px 0
      float: left;
      cursor: pointer;
      outline: 1px solid #aaa;
      .title
        absolute: left 0 top 0;
        display: inline-block;
        padding: 1px 5px;
        font-size: 12px;
        background-color: rgba(black, .8);
        color: #fff;
        z-index: 100;
      .preview
        size: 100%;
      &:hover
        outline: 3px solid silver;
      &.active
        outline: 3px solid green;
    .variants
      absolute: bottom 0 right 1px;
      z-index: 100;
      li
        display: inline-block;
        background-color: white;
        border-radius: 5px;
        size: 22px;
        text-align: center;
        border: 2px solid #bbb; 
      li:hover
        border-color: #888;
      li.active
        border-color: green;
      .icon *
        fill-and-stroke: #333;

  .box.expanded
    width: 400px;
    header
      border-bottom-left-radius: 0;


.clear
  clear: both;

svg line
   shape-rendering: crispEdges;

.elevation
  .main-area
    fill: none; stroke: none; pointer-events: all;
  .band
    fill: none; stroke: darkgreen; stroke-width: 2px;
  .band-fill
    fill: green; stroke: none;
  .axis, .tick
    stroke: #333; stroke-width: 1px;
  .axis-label, .tick-label
    font-size: 10px;
  .x-axis .tick-label
    text-anchor: middle;
  .y-axis .tick-label
    text-anchor: end;
  .x-axis .axis-label
    text-anchor: start;
  .y-axis .axis-label
    text-anchor: middle;
    writing-mode: rl-tb;
  .guide
    stroke: #555; stroke-width: 1px; stroke-dasharray: 4 1; pointer-events: none;
  .guide-label
    font-size: 10px; background-color: rgba(white, .8);
  .labels-left .guide-label
    text-anchor: end;
